{"version":3,"sources":["cart.router.js"],"names":["express","require","app","Router","Cart","get","req","res","find","data","send","massage","post","findOne","token","body","exists","console","log","newData","findOneAndUpdate","$set","cartData","h","create","filter","el","id","module","exports"],"mappings":";;;;;;;;;;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,GAAG,GAAGF,OAAO,CAACG,MAAR,EAAZ;;AACA,IAAMC,IAAI,GAAGH,OAAO,CAAC,cAAD,CAApB;;AACAC,GAAG,CAACG,GAAJ,CAAQ,GAAR,EAAa,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAEQH,IAAI,CAACI,IAAL,EAFR;;AAAA;AAELC,UAAAA,KAFK;AAITF,UAAAA,GAAG,CAACG,IAAJ,CAASD,KAAT;AAJS;AAAA;;AAAA;AAAA;AAAA;AAMTF,UAAAA,GAAG,CAACG,IAAJ,CAAS,YAAEC,OAAX;;AANS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAb;AASAT,GAAG,CAACU,IAAJ,CAAS,GAAT,EAAc,kBAAON,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAESH,IAAI,CAACS,OAAL,CAAa;AAAEC,YAAAA,KAAK,EAAER,GAAG,CAACS,IAAJ,CAASD;AAAlB,WAAb,CAFT;;AAAA;AAENE,UAAAA,MAFM;AAGVC,UAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAG,CAACS,IAAhB;;AAHU,eAINC,MAJM;AAAA;AAAA;AAAA;;AAAA;AAAA,0CAMYZ,IAAI,CAACI,IAAL,CAAU;AAAEM,YAAAA,KAAK,EAAER,GAAG,CAACS,IAAJ,CAASD;AAAlB,WAAV,CANZ;;AAAA;AAMJK,UAAAA,OANI;AAORF,UAAAA,OAAO,CAACC,GAAR,CAAYC,OAAZ;AAPQ;AAAA,0CAQMf,IAAI,CAACgB,gBAAL,CACZ;AAAEN,YAAAA,KAAK,EAAER,GAAG,CAACS,IAAJ,CAASD;AAAlB,WADY,EAEZ;AAAEO,YAAAA,IAAI,EAAE;AAAEC,cAAAA,QAAQ,+BAAMH,OAAO,CAAC,CAAD,CAAP,CAAWG,QAAjB,IAA2BhB,GAAG,CAACS,IAAJ,CAASN,IAApC;AAAV;AAAR,WAFY,CARN;;AAAA;AAQJc,UAAAA,CARI;AAAA;AAAA;;AAAA;AAaJJ,UAAAA,QAbI,GAaM;AAAEL,YAAAA,KAAK,EAAER,GAAG,CAACS,IAAJ,CAASD,KAAlB;AAAyBQ,YAAAA,QAAQ,EAAEhB,GAAG,CAACS,IAAJ,CAASN;AAA5C,WAbN;AAAA;AAAA,0CAcSL,IAAI,CAACoB,MAAL,CAAYL,QAAZ,CAdT;;AAAA;AAcJV,UAAAA,MAdI;AAeRQ,UAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;;AAfQ;AAkBVX,UAAAA,GAAG,CAACG,IAAJ,CAASD,IAAT;AAlBU;AAAA;;AAAA;AAAA;AAAA;AAoBVF,UAAAA,GAAG,CAACG,IAAJ,CAAS,aAAEC,OAAX;;AApBU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAd;AAwBAT,GAAG,UAAH,CAAW,GAAX,EAAgB,kBAAOI,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAEOH,IAAI,CAACS,OAAL,CAAa;AAAEC,YAAAA,KAAK,EAAER,GAAG,CAACS,IAAJ,CAASD;AAAlB,WAAb,CAFP;;AAAA;AAERE,UAAAA,MAFQ;AAIRG,UAAAA,OAJQ,GAIEH,MAAM,CAACM,QAAP,CAAgBG,MAAhB,CAAuB,UAACC,EAAD;AAAA,mBAAQA,EAAE,CAACC,EAAH,IAASrB,GAAG,CAACS,IAAJ,CAASY,EAA1B;AAAA,WAAvB,CAJF;AAAA;AAAA,0CAMEvB,IAAI,CAACgB,gBAAL,CACZ;AAAEN,YAAAA,KAAK,EAAER,GAAG,CAACS,IAAJ,CAASD;AAAlB,WADY,EAEZ;AAAEO,YAAAA,IAAI,EAAE;AAAEC,cAAAA,QAAQ,EAAEH;AAAZ;AAAR,WAFY,CANF;;AAAA;AAMRI,UAAAA,CANQ;AAWZhB,UAAAA,GAAG,CAACG,IAAJ,CAASD,IAAT;AAXY;AAAA;;AAAA;AAAA;AAAA;AAaZF,UAAAA,GAAG,CAACG,IAAJ,CAAS,aAAEC,OAAX;;AAbY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAhB;AAiBAiB,MAAM,CAACC,OAAP,GAAiB3B,GAAjB","sourcesContent":["const express = require(\"express\");\r\nconst app = express.Router();\r\nconst Cart = require(\"./cart.model\");\r\napp.get(\"/\", async (req, res) => {\r\n  try {\r\n    let data = await Cart.find();\r\n\r\n    res.send(data);\r\n  } catch (e) {\r\n    res.send(e.massage);\r\n  }\r\n});\r\napp.post(\"/\", async (req, res) => {\r\n  try {\r\n    let exists = await Cart.findOne({ token: req.body.token });\r\n    console.log(req.body);\r\n    if (exists) {\r\n    \r\n      let newData = await Cart.find({ token: req.body.token });\r\n      console.log(newData);\r\n      let h = await Cart.findOneAndUpdate(\r\n        { token: req.body.token },\r\n        { $set: { cartData: [...newData[0].cartData, req.body.data] } }\r\n      );\r\n    } else {\r\n      let newData = { token: req.body.token, cartData: req.body.data };\r\n      let data = await Cart.create(newData);\r\n      console.log(564);\r\n    }\r\n\r\n    res.send(data);\r\n  } catch (e) {\r\n    res.send(e.massage);\r\n  }\r\n});\r\n\r\napp.delete(\"/\", async (req, res) => {\r\n  try {\r\n    let exists = await Cart.findOne({ token: req.body.token });\r\n\r\n    let newData = exists.cartData.filter((el) => el.id != req.body.id);\r\n\r\n    let h = await Cart.findOneAndUpdate(\r\n      { token: req.body.token },\r\n      { $set: { cartData: newData } }\r\n    );\r\n\r\n    res.send(data);\r\n  } catch (e) {\r\n    res.send(e.massage);\r\n  }\r\n});\r\n\r\nmodule.exports = app;"],"file":"cart.router.dev.js"}